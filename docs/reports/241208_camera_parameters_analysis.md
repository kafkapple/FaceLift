# Camera Parameters Analysis: MAMMAL to FaceLift Conversion

- **ë‚ ì§œ**: 2024-12-08
- **ì£¼ì œ**: ì¹´ë©”ë¼ íŒŒë¼ë¯¸í„° ì˜ë¯¸ ë° ì •ê·œí™” ê³¼ì • ë¶„ì„
- **ëª©ì **: MAMMAL ë°ì´í„°ì…‹ì„ FaceLift í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì • ì´í•´

---

## 1. ì¹´ë©”ë¼ íŒŒë¼ë¯¸í„° ì •ì˜

### 1.1 ì¢Œí‘œê³„ ë° íŒŒë¼ë¯¸í„° ì‹œê°í™”

```
                    Z (up)
                    |
                    |  elevation (ê³ ë„ê°)
                    | /
                    |/_____ Y
                   /\
                  /  \
                 /    azimuth (ë°©ìœ„ê°)
                X

        ì¹´ë©”ë¼ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ì›ì  (í”¼ì‚¬ì²´ ìœ„ì¹˜)
              â””â”€ distance (ê±°ë¦¬)
```

### 1.2 ê° íŒŒë¼ë¯¸í„° ì˜ë¯¸

| íŒŒë¼ë¯¸í„° | ê¸°í˜¸ | ì˜ë¯¸ | ë‹¨ìœ„ |
|---------|------|------|------|
| **ê±°ë¦¬ (Distance)** | d | ì¹´ë©”ë¼ì—ì„œ ì›ì (í”¼ì‚¬ì²´)ê¹Œì§€ ìœ í´ë¦¬ë“œ ê±°ë¦¬ | ë‹¨ìœ„ ì—†ìŒ (ìƒëŒ€ì ) |
| **ê³ ë„ê° (Elevation)** | Î¸ | ìˆ˜í‰ë©´(XY)ì—ì„œ ì¹´ë©”ë¼ê°€ ìœ„ë¡œ ì˜¬ë¼ê°„ ê°ë„ | ë„(Â°) |
| **ë°©ìœ„ê° (Azimuth)** | Ï† | XY í‰ë©´ì—ì„œ ì¹´ë©”ë¼ ìœ„ì¹˜ (Xì¶• ê¸°ì¤€ ë°˜ì‹œê³„) | ë„(Â°) |
| **ì´ˆì ê±°ë¦¬ (Focal Length)** | fx, fy | ì¹´ë©”ë¼ ë‚´ë¶€ íŒŒë¼ë¯¸í„°, ì¤Œ ì •ë„ ê²°ì • | í”½ì…€ |

### 1.3 íŒŒë¼ë¯¸í„° ê³„ì‚° ê³µì‹

```python
# ì¹´ë©”ë¼ ìœ„ì¹˜ì—ì„œ íŒŒë¼ë¯¸í„° ê³„ì‚°
cam_pos = [x, y, z]  # ì›”ë“œ ì¢Œí‘œê³„ì—ì„œ ì¹´ë©”ë¼ ìœ„ì¹˜

distance = sqrt(xÂ² + yÂ² + zÂ²)
elevation = arcsin(z / distance)  # ë¼ë””ì•ˆ â†’ ë„ ë³€í™˜ í•„ìš”
azimuth = arctan2(y, x)           # ë¼ë””ì•ˆ â†’ ë„ ë³€í™˜ í•„ìš”

# ì´ˆì ê±°ë¦¬ì™€ FOV ê´€ê³„
fx = (image_width / 2) / tan(FOV / 2)
FOV = 2 * arctan(image_width / (2 * fx))
```

### 1.4 ê³ ë„ê°/ë°©ìœ„ê° ì˜ˆì‹œ

| ê³ ë„ê° | ì˜ë¯¸ |
|-------|------|
| 0Â° | ìˆ˜í‰ (í”¼ì‚¬ì²´ì™€ ê°™ì€ ë†’ì´) |
| 20Â° | ì•½ê°„ ìœ„ì—ì„œ ë‚´ë ¤ë‹¤ë´„ |
| 45Â° | ëŒ€ê°ì„  ìœ„ì—ì„œ |
| 90Â° | ì • ìœ„ì—ì„œ (top-down) |

| ë°©ìœ„ê° | ì˜ë¯¸ |
|-------|------|
| 0Â° | ì •ë©´ (+X ë°©í–¥) |
| 90Â° | ì˜¤ë¥¸ìª½ (+Y ë°©í–¥) |
| 180Â° / -180Â° | ë’¤ (-X ë°©í–¥) |
| -90Â° | ì™¼ìª½ (-Y ë°©í–¥) |

---

## 2. MAMMAL vs FaceLift ì¹´ë©”ë¼ ë¹„êµ

### 2.1 ì›ë³¸ MAMMAL ì¹´ë©”ë¼ (6ëŒ€)

```
Camera 0: dist=246.1, elev=14.9Â°, azim=-147.0Â°, fx=1632.3, FOV=40.4Â°
Camera 1: dist=414.5, elev=20.6Â°, azim=34.0Â°,   fx=1556.8, FOV=43.6Â°
Camera 2: dist=363.7, elev=11.3Â°, azim=86.1Â°,   fx=1630.3, FOV=41.1Â°
Camera 3: dist=340.0, elev=10.7Â°, azim=-11.3Â°,  fx=1606.2, FOV=39.9Â°
Camera 4: dist=318.3, elev=26.5Â°, azim=144.0Â°,  fx=1618.3, FOV=43.2Â°
Camera 5: dist=305.7, elev=30.8Â°, azim=-64.1Â°,  fx=1636.9, FOV=41.1Â°
```

### 2.2 FaceLift ê¸°ëŒ€ê°’ (Objaverse í•™ìŠµ ë°ì´í„° ê¸°ì¤€)

```
- ê±°ë¦¬: ~2.7 ë‹¨ìœ„
- ê³ ë„ê°: 20Â° (turntable ê¸°ë³¸ê°’)
- ë°©ìœ„ê°: ê· ë“± ë¶„í¬ (45Â° ê°„ê²© ë“±)
- fx: ~549 (FOV 50Â° ê¸°ì¤€, 512px ì´ë¯¸ì§€)
```

### 2.3 ì •ê·œí™” í›„ ë°ì´í„°

```
Camera 0: dist=2.00, elev=14.9Â°, azim=-147.0Â°, fx=549.0
Camera 1: dist=3.38, elev=20.6Â°, azim=34.0Â°,   fx=549.0
Camera 2: dist=2.96, elev=11.3Â°, azim=86.1Â°,   fx=549.0
Camera 3: dist=2.77, elev=10.7Â°, azim=-11.3Â°,  fx=549.0
Camera 4: dist=2.59, elev=26.5Â°, azim=144.0Â°,  fx=549.0
Camera 5: dist=2.49, elev=30.8Â°, azim=-64.1Â°,  fx=549.0
```

### 2.4 ë¹„êµ ìš”ì•½

| íŒŒë¼ë¯¸í„° | MAMMAL ì›ë³¸ | ì •ê·œí™” í›„ | ë³€ê²½ ì—¬ë¶€ |
|---------|------------|----------|----------|
| ê±°ë¦¬ | 246~414 | 2.0~3.4 | âœ… ìŠ¤ì¼€ì¼ë§ |
| ê³ ë„ê° | 11~31Â° | 11~31Â° | âŒ ìœ ì§€ |
| ë°©ìœ„ê° | ë¶ˆê·œì¹™ | ë¶ˆê·œì¹™ | âŒ ìœ ì§€ |
| fx | 1556~1637 | 549 | âœ… FOV í†µì¼ |

---

## 3. ì™œ ìŠ¤ì¼€ì¼ ì¡°ì •ì´ ê°€ëŠ¥í•œê°€?

### 3.1 3D ì¥ë©´ì˜ ìŠ¤ì¼€ì¼ ë¶ˆë³€ì„± (Scale Invariance)

í•µì‹¬ ì›ë¦¬: **ë™ì¼í•œ ì´ë¯¸ì§€ëŠ” ë¬´í•œíˆ ë§ì€ 3D ì¥ë©´ì—ì„œ ìƒì„±ë  ìˆ˜ ìˆìŒ**

```
ì‹¤ì œ ì„¸ê³„:                    ì •ê·œí™”ëœ ì„¸ê³„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ­ 10cm   â”‚              â”‚   ğŸ­ 1 unit â”‚
â”‚             â”‚              â”‚             â”‚
â”‚  ğŸ“· 300mm   â”‚     â•â•â•>     â”‚  ğŸ“· 2.7 unitâ”‚
â”‚  fx=1600    â”‚   ìŠ¤ì¼€ì¼ë§    â”‚  fx=549     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â†“                           â†“
    [ë™ì¼í•œ ì´ë¯¸ì§€]  â•â•â•â•â•â•â•â•  [ë™ì¼í•œ ì´ë¯¸ì§€]
```

### 3.2 ìˆ˜í•™ì  ì„¤ëª…

```python
# í•€í™€ ì¹´ë©”ë¼ ëª¨ë¸
# 3D ì  P = (X, Y, Z) â†’ 2D í”½ì…€ p = (u, v)

u = fx * (X / Z) + cx
v = fy * (Y / Z) + cy

# ìŠ¤ì¼€ì¼ ë³€í™˜: ëª¨ë“  ì¢Œí‘œì— s ê³±í•¨
# P' = s * P = (sX, sY, sZ)
# fx' = fx / s

u' = (fx/s) * (sX / sZ) + cx
   = fx * (X / Z) + cx
   = u  # ë™ì¼!

# ê²°ë¡ : ê±°ë¦¬ì™€ fxë¥¼ ê°™ì€ ë¹„ìœ¨ë¡œ ì¡°ì •í•˜ë©´ ì´ë¯¸ì§€ ë¶ˆë³€
```

### 3.3 ì‹¤ì œ ë³€í™˜ ì˜ˆì‹œ

```python
# MAMMAL â†’ FaceLift ë³€í™˜
original_distance = 330  # í‰ê·  ê±°ë¦¬
target_distance = 2.7
scale_factor = target_distance / original_distance  # â‰ˆ 0.0082

# Translation ë²¡í„° ìŠ¤ì¼€ì¼ë§
T_normalized = T_original * scale_factor

# fxëŠ” FaceLift í‘œì¤€ê°’ìœ¼ë¡œ ëŒ€ì²´ (FOV í†µì¼)
fx_normalized = 549  # FOV 50Â° ê¸°ì¤€
```

---

## 4. ë¬´ì—‡ì´ ë³€í•˜ê³  ë¬´ì—‡ì´ ê³ ì •ì¸ê°€?

### 4.1 ê³ ì •ë˜ëŠ” ìš”ì†Œ (ë³€ê²½ ë¶ˆê°€)

| ìš”ì†Œ | ì´ìœ  |
|-----|------|
| **ì´ë¯¸ì§€ í”½ì…€ (RGB)** | ì‹¤ì œ ì´¬ì˜ëœ ë°ì´í„° |
| **ë§ˆìŠ¤í¬ (Alpha)** | Segmentation ê²°ê³¼ |
| **ì¹´ë©”ë¼ íšŒì „ (R)** | ì‹¤ì œ ì¹´ë©”ë¼ê°€ ë°”ë¼ë³´ëŠ” ë°©í–¥ |
| **ìƒëŒ€ì  ì¹´ë©”ë¼ ë°°ì¹˜** | 6ëŒ€ ì¹´ë©”ë¼ ê°„ì˜ ê¸°í•˜í•™ì  ê´€ê³„ |

### 4.2 ì¡°ì • ê°€ëŠ¥í•œ ìš”ì†Œ

| ìš”ì†Œ | ì¡°ì • ë°©ë²• | ëª©ì  |
|-----|----------|------|
| **ì¹´ë©”ë¼ ê±°ë¦¬** | Translation ìŠ¤ì¼€ì¼ë§ | FaceLift ìŠ¤ì¼€ì¼ì— ë§ì¶¤ |
| **fx, fy** | FOV ê¸°ë°˜ ì¬ê³„ì‚° | ëª¨ë¸ í•™ìŠµ ì¡°ê±´ê³¼ ì¼ì¹˜ |
| **cx, cy** | ì´ë¯¸ì§€ ì¤‘ì‹¬ìœ¼ë¡œ | í¬ë¡­/ë¦¬ì‚¬ì´ì¦ˆ ë³´ì • |

---

## 5. ë³€í™˜ íŒŒì´í”„ë¼ì¸

### 5.1 ì „ì²´ íë¦„

```
MAMMAL ì›ë³¸ ë°ì´í„°
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì¹´ë©”ë¼ íŒŒë¼ë¯¸í„° ë¡œë“œ (new_cam.pkl) â”‚
â”‚    - R, T, K ë§¤íŠ¸ë¦­ìŠ¤                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. í‰ê·  ê±°ë¦¬ ê³„ì‚°                    â”‚
â”‚    avg_dist = mean(||cam_pos||)     â”‚
â”‚    = 330 (MAMMAL ê¸°ì¤€)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ìŠ¤ì¼€ì¼ íŒ©í„° ê³„ì‚°                  â”‚
â”‚    scale = 2.7 / avg_dist           â”‚
â”‚    â‰ˆ 0.0082                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Translation ì •ê·œí™”               â”‚
â”‚    T_new = T_original * scale       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Intrinsics ì„¤ì • (FaceLift í‘œì¤€)  â”‚
â”‚    fx = fy = 549 (FOV 50Â°)          â”‚
â”‚    cx = cy = 256 (ì´ë¯¸ì§€ ì¤‘ì‹¬)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. opencv_cameras.json ì €ì¥         â”‚
â”‚    - w2c ë§¤íŠ¸ë¦­ìŠ¤                    â”‚
â”‚    - fx, fy, cx, cy                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì½”ë“œ êµ¬í˜„ (process_mouse_data.py)

```python
def convert_to_facelift_format(
    cameras: List[Dict],
    image_size: int = 512,
    target_distance: float = 2.7,
    target_fov_deg: float = 50.0
) -> Dict:
    # 1. í‰ê·  ê±°ë¦¬ ê³„ì‚°
    distances = []
    for cam in cameras:
        R = np.array(cam["R"])
        T = np.array(cam["T"]).flatten()
        cam_pos = -R.T @ T  # ì›”ë“œ ì¢Œí‘œê³„ì—ì„œ ì¹´ë©”ë¼ ìœ„ì¹˜
        distances.append(np.linalg.norm(cam_pos))

    avg_distance = np.mean(distances)
    scale_factor = target_distance / avg_distance

    # 2. FaceLift í‘œì¤€ intrinsics
    target_fx = 0.5 * image_size / np.tan(0.5 * np.deg2rad(target_fov_deg))

    # 3. ê° ì¹´ë©”ë¼ ë³€í™˜
    for cam in cameras:
        T_normalized = T * scale_factor  # ê±°ë¦¬ ì •ê·œí™”

        w2c = np.eye(4)
        w2c[:3, :3] = R      # íšŒì „ì€ ìœ ì§€
        w2c[:3, 3] = T_normalized  # ìŠ¤ì¼€ì¼ëœ translation

        # FaceLift í‘œì¤€ intrinsics ì‚¬ìš©
        fx, fy = target_fx, target_fx
        cx, cy = image_size / 2, image_size / 2
```

---

## 6. ì™œ ì´ ë³€í™˜ì´ í•„ìš”í•œê°€?

### 6.1 FaceLift ëª¨ë¸ í•™ìŠµ ì¡°ê±´

FaceLift(GS-LRM)ëŠ” Objaverse ë°ì´í„°ì…‹ìœ¼ë¡œ í•™ìŠµë¨:

```
Objaverse ë Œë”ë§ ì„¤ì •:
- ë¬¼ì²´ í¬ê¸°: ì •ê·œí™” (bounding box â‰ˆ 1 unit)
- ì¹´ë©”ë¼ ê±°ë¦¬: 2.7 unit
- FOV: 50Â°
- ì´ë¯¸ì§€ í¬ê¸°: 512 Ã— 512
```

### 6.2 ìŠ¤ì¼€ì¼ ë¶ˆì¼ì¹˜ ì‹œ ë¬¸ì œ

```
ì˜ëª»ëœ ìŠ¤ì¼€ì¼ (ê±°ë¦¬ 300 ê·¸ëŒ€ë¡œ ì‚¬ìš©):
- ëª¨ë¸ì´ "ë§¤ìš° ë¨¼ ë¬¼ì²´"ë¡œ ì¸ì‹
- Gaussian ìœ„ì¹˜ ì˜ˆì¸¡ ì˜¤ë¥˜
- ë Œë”ë§ í’ˆì§ˆ ì €í•˜

ì˜¬ë°”ë¥¸ ìŠ¤ì¼€ì¼ (2.7ë¡œ ì •ê·œí™”):
- ëª¨ë¸ í•™ìŠµ ì¡°ê±´ê³¼ ì¼ì¹˜
- ì •í™•í•œ 3D ë³µì›
- ê³ í’ˆì§ˆ Novel View Synthesis
```

---

## 7. ê²€ì¦ ê²°ê³¼

### 7.1 í˜„ì¬ ë°ì´í„° ìƒíƒœ (gpu05)

```bash
# ê²€ì¦ ëª…ë ¹ì–´
python3 -c "
import json, numpy as np
with open('data_mouse/sample_000000/opencv_cameras.json') as f:
    data = json.load(f)
for i, frame in enumerate(data['frames']):
    w2c = np.array(frame['w2c'])
    c2w = np.linalg.inv(w2c)
    pos = c2w[:3, 3]
    dist = np.linalg.norm(pos)
    elev = np.degrees(np.arcsin(pos[2]/dist))
    print(f'Camera {i}: dist={dist:.2f}, elev={elev:.1f}Â°')
"
```

### 7.2 ì¶œë ¥ ê²°ê³¼

```
Camera 0: dist=2.00, elev=14.9Â°
Camera 1: dist=3.38, elev=20.6Â°
Camera 2: dist=2.96, elev=11.3Â°
Camera 3: dist=2.77, elev=10.7Â°
Camera 4: dist=2.59, elev=26.5Â°
Camera 5: dist=2.49, elev=30.8Â°
```

**ê²°ë¡ **: ì¹´ë©”ë¼ ê±°ë¦¬ê°€ FaceLift ê¸°ëŒ€ ë²”ìœ„(~2.7)ë¡œ ì •ê·œí™”ë¨, ê³ ë„ê°/ë°©ìœ„ê°ì€ ì‹¤ì œ MAMMAL ë°°ì¹˜ ìœ ì§€ë¨.

---

## 8. ìš”ì•½

| ì§ˆë¬¸ | ë‹µë³€ |
|-----|------|
| ì´ë¯¸ì§€ê°€ ë°”ë€Œë‚˜? | âŒ ë™ì¼ (í”½ì…€ ê·¸ëŒ€ë¡œ) |
| ì¹´ë©”ë¼ ë°©í–¥ì´ ë°”ë€Œë‚˜? | âŒ ë™ì¼ (R ë§¤íŠ¸ë¦­ìŠ¤ ìœ ì§€) |
| ë¬´ì—‡ì´ ë°”ë€Œë‚˜? | 3D ìŠ¤ì¼€ì¼ (ê±°ë¦¬), FOV (fx) |
| ì™œ í•„ìš”í•œê°€? | ëª¨ë¸ í•™ìŠµ ì¡°ê±´ì— ë§ì¶”ê¸° ìœ„í•´ |
| ì •ë³´ ì†ì‹¤ì´ ìˆë‚˜? | âŒ ì—†ìŒ (ê°€ì—­ì  ë³€í™˜) |

---

## ì°¸ê³  ìë£Œ

- [FaceLift Paper](https://arxiv.org/abs/2412.04766)
- [GS-LRM: Gaussian Splatting Large Reconstruction Model](https://arxiv.org/abs/2404.19702)
- [Pinhole Camera Model](https://en.wikipedia.org/wiki/Pinhole_camera_model)
- [MAMMAL Dataset](https://github.com/google/mouse-pose-analysis)

---

*Generated with Claude Code*
